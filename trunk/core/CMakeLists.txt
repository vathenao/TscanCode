ts_add_definitions(
	-DUNICODE
	-DHAVE_STRUCT_TIMESPEC
	-DTSCANCODELIB_EXPORT
	-DTSCOMMONLIB_EXPORT
	-DTINYXML2_EXPORT
	-DWIN32
	-DWIN32_LEAN_AND_MEAN
	-D_CRT_SECURE_NO_WARNINGS
)

ts_include_directories(
.
../include/common
../include/tinyxml
)

ts_add_sources(
	astutils.h
	astutils.cpp
	check.h
	check.cpp
	check64bit.h
	check64bit.cpp
	checkassert.h
	checkassert.cpp
	checkautovariables.h
	checkautovariables.cpp
	checkbool.h
	checkbool.cpp
	checkboost.h
	checkboost.cpp
	checkbufferoverrun.h
	checkbufferoverrun.cpp
	checkclass.h
	checkclass.cpp
	checkcondition.h
	checkcondition.cpp
	checkexceptionsafety.h
	checkexceptionsafety.cpp
	checkinternal.h
	checkinternal.cpp
	checkio.h
	checkio.cpp
	checkleakautovar.h
	checkleakautovar.cpp
	checkmemoryleak.h
	checkmemoryleak.cpp
	checknonreentrantfunctions.h
	checknonreentrantfunctions.cpp
	checknullpointer.h
	checknullpointer.cpp
	checkobsolescentfunctions.h
	checkobsolescentfunctions.cpp
	checkother.h
	checkother.cpp
	checkpostfixoperator.h
	checkpostfixoperator.cpp
	checkreadability.h
	checkreadability.cpp
	checksizeof.h
	checksizeof.cpp
	checkstatistic.h
	checkstatistic.cpp
	checkstl.h
	checkstl.cpp
	checkstring.h
	checkstring.cpp
	checktsccompute.h
	checktsccompute.cpp
	checktscinvalidvarargs.h
	checktscinvalidvarargs.cpp
	checktsclogic.h
	checktsclogic.cpp
	checktscnullpointer2.h
	checktscnullpointer2.cpp
	checktscoverrun.h
	checktscoverrun.cpp
	checktscsuspicious.h
	checktscsuspicious.cpp
	checktype.h
	checktype.cpp
	checkuninitvar.h
	checkuninitvar.cpp
	checkunusedfunctions.h
	checkunusedfunctions.cpp
	checkunusedvar.h
	checkunusedvar.cpp
	checkvaarg.h
	checkvaarg.cpp
	cxx11emu.h
	errorlogger.h
	errorlogger.cpp
	executionpath.h
	executionpath.cpp
	gitblamemgr.h
	gitblamemgr.cpp
	globalmacros.h
	globalmacros.cpp
	globalsymboldatabase.h
	globalsymboldatabase.cpp
	globaltokenizer.h
	globaltokenizer.cpp
	library.h
	library.cpp
	matchcompiler.h
	mathlib.h
	mathlib.cpp
	preprocessor.h
	preprocessor.cpp
	settings.h
	settings.cpp
	standards.h
	suppressions.h
	suppressions.cpp
	symboldatabase.h
	symboldatabase.cpp
	templatesimplifier.h
	templatesimplifier.cpp
	timer.h
	timer.cpp
	token.h
	token.cpp
	tokenex.h
	tokenex.cpp
	tokenize.h
	tokenlist.h
	tokenlist.cpp
	tokenize.cpp
	tscancode.h
	tscancode.cpp
	utilities.h
	utilities.cpp
	utils.h
	valueflow.h
	valueflow.cpp
	version.h
	config.h
	path.cpp
	path.h

	../externals/tinyxml/tinyxml2.cpp
	../externals/tinyxml/tinyxml2.h
)

ts_add_library(tcore SHARED ${TS_BIN_TARGET_PATH})
ts_link_libraries(
	Shlwapi
	tcommon
)